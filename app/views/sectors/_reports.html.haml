%table.table.table-sm.table-hover#dttb_sector_reports
  %thead
    %tr
      %th Cell
      %th Village
      - if scale == 'Family'
        - if @plans.any?
          %th.text-center= "#{human_number(@plans.sum(:goal))} Planned (by #{human_date(@plans.first&.date)})"
        - else
          %th.text-center Planned
        - if @reports.any?
          %th.text-center= human_number(@reports.sum(:distributed)) + ' Distributed'
          %th.text-center= human_number(@reports.sum(:impact)) + ' People served'
          %th.text-center= human_number(@reports.sum(:checked)) + ' Checked'
        - else
          %th.text-center Distributed
          %th.text-center People served
          %th.text-center Checked
      - else # scale == 'Community'
        %th Facility
        %th.text-center Population
        %th Type
        %th.text-center= "#<br>Installed".html_safe
        %th.text-center= "#<br>Checked".html_safe
        %th.text-center Date
        %th.text-center= "People<br>served".html_safe
      %th
      %th
    %tbody
      = render partial: 'report', collection: @reports, locals: { scale: scale }

